{"version":3,"sources":["thread.js"],"names":["e","exports","module","define","amd","f","window","global","self","thread","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_","workerSrc","eventMethod","addEventListener","messageEvent","removeEventListener","FakeWorker","id","this","_terminated","listeners","_create","_setupListeners","_initialize","prototype","iframe","document","createElement","style","display","body","appendChild","_subscribeListeners","type","eventHandler","data","owner","each","fn","isFn","_eventHandler","_unsubscribeListeners","_getWindow","win","contentWindow","wEval","eval","execScript","msg","getSource","pool","push","index","splice","indexOf","postMessage","origin","getLocation","terminate","removeChild","location","protocol","hostname","port","./utils","./worker",2,"store","Thread","ThreadFactory","options","VERSION","create","Task","total","all","running","idle","flush","killAll","terminateAll","killIdle","terminateIdle","./store","./thread",3,"num","threadRun","run","threads","findBestAvailableThread","offset","pending","terminated","newThread","runTask","args","task","apply","exec","arguments","nextThread","count","kill","threadPool","isPool",4,"toInteger","Math","floor","abs","Array","sought","Object","max","buf","slice","remove","getByStatus","typeBuf","arr",5,"env","uuid","worker","time","memoized","error","success","end","intervalCheckTime","bind","set","extend","TypeError","isArr","isObj","serializeMap","now","maxTaskDelay","checkInterval","_tasks","cleanTask","addWorkerMessageListener","_send","then","errorFn","pushStateHandler","finish","getValue","flushed","src","toString","maxDelay","_timer","setInterval","clearTimer","checkTaskDelay","onMessage","dispathEvent","value","dispatcher","recur","shift","createError","err","name","errorName","stack","errorStack","_latestTask","clearInterval","isValidEvent","handler","ev","triggerMessage","split",6,"Worker","URL","webkitURL","hasWorkers","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","_setOptions","idleTime","namespace","createBlob","send","defer","fnName","concat","flushTasks","tasks","start","init","sleep","on","off","blob","Blob","append","getBlob","createObjectURL","./fake-worker","./pool","./task",7,"toStr","hasOwn","hasOwnProperty","isArrayNative","isArray","Date","getTime","obj","toArr","setTimeout","target","key","undefined","random",8,"$$evalExpr","expr","isolated","isWorker","importFn","importScripts","appendScripts","ready","queue","scriptsLoad","intervalId","fnRegex","urlProtocolRegex","mapFields","test","replace","forEach","waitToDocumentReady","readyState","onreadystatechange","appendScript","head","getElementsByTagName","script","onload","scriptsLoadTimer","loadScripts","map","makePathFullUrl","path","requireFn","parent","sendError","message","sendSuccess","val","done","process","result","ctx","doJob","extendEnv"],"mappings":";CACC,SAASA,GAAG,GAAG,gBAAiBC,UAAS,mBAAoBC,QAAOA,OAAOD,QAAQD,QAAS,IAAG,kBAAmBG,SAAQA,OAAOC,IAAID,UAAUH,OAAO,CAAC,GAAIK,EAAE,oBAAoBC,QAAOD,EAAEC,OAAO,mBAAoBC,QAAOF,EAAEE,OAAO,mBAAoBC,QAAOH,EAAEG,MAAMH,EAAEI,OAAOT,MAAM,WAAW,GAAIG,QAAOD,OAAOD,OAAQ,OAAO,SAAUD,GAAEU,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,SAASC,UAAS,YAAYA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAG,EAAG,IAAGI,EAAE,MAAOA,GAAEJ,GAAG,EAAG,IAAIT,GAAE,GAAIc,OAAM,uBAAuBL,EAAE,IAAK,MAAMT,GAAEe,KAAK,mBAAmBf,EAAE,GAAIgB,GAAEV,EAAEG,IAAIb,WAAYS,GAAEI,GAAG,GAAGQ,KAAKD,EAAEpB,QAAQ,SAASD,GAAG,GAAIW,GAAED,EAAEI,GAAG,GAAGd,EAAG,OAAOa,GAAEF,EAAEA,EAAEX,IAAIqB,EAAEA,EAAEpB,QAAQD,EAAEU,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGb,QAAQ,GAAIiB,SAASD,UAAS,YAAYA,OAAQ,KAAI,GAAIH,GAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKW,GAAG,SAASP,EAAQf,EAAOD,GAC3xB,GAAIwB,GAAIR,EAAQ,UAChB,IAAIS,GAAYT,EAAQ,WAExB,IAAIU,GAAcrB,OAAOsB,iBAAmB,mBAAqB,aACjE,IAAIC,GAAeF,IAAgB,cAAgB,YAAc,SACjE,IAAIC,GAAmBtB,OAAOqB,EAC9B,IAAIG,GAAsBxB,OAAOA,OAAOwB,oBAAsB,sBAAwB,cAEtF5B,GAAOD,QAAU8B,CAEjB,SAASA,GAAWC,GAClBC,KAAKD,GAAKA,CACVC,MAAKC,YAAc,KACnBD,MAAKE,YACLF,MAAKG,SACLH,MAAKI,iBACLJ,MAAKK,cAGPP,EAAWQ,UAAUH,QAAU,WAC7B,GAAII,GAASP,KAAKO,OAASC,SAASC,cAAc,SAClD,KAAKF,EAAOG,MAAOH,EAAOG,QAC1BH,GAAOG,MAAMC,QAAU,MACvBJ,GAAOR,GAAK,UAAYC,KAAKD,EAC7BS,UAASI,KAAKC,YAAYN,GAG5BT,GAAWQ,UAAUQ,oBAAsB,SAAUC,GACnD,GAAIb,GAAYF,KAAKE,SACrB,IAAIR,IAAgB,cAAeqB,EAAO,KAAOA,CAEjD,SAASC,GAAajD,GACpB,GAAIA,EAAEkD,MAAQlD,EAAEkD,KAAKC,QAAU,YAAa,CAC1C,GAAIhB,EAAUa,GAAO,CACnBvB,EAAE2B,KAAKjB,EAAUa,GAAO,SAAUK,GAChC,GAAI5B,EAAE6B,KAAKD,GAAKA,EAAGrD,OAM3BiC,KAAKsB,cAAgBN,CACrBrB,GAAiBoB,EAAMC,GAGzBlB,GAAWQ,UAAUF,gBAAkB,WACrCJ,KAAKc,oBAAoB,UACzBd,MAAKc,oBAAoB,SAG3BhB,GAAWQ,UAAUiB,sBAAwB,WAC3C1B,EAAoB,QAASG,KAAKsB,cAClCzB,GAAoB,UAAWG,KAAKsB,eAGtCxB,GAAWQ,UAAUkB,WAAa,WAChC,GAAIC,GAAM,IACV,KAAKzB,KAAKC,YAAa,CACrBwB,EAAMzB,KAAKO,OAAOmB,aAClB,IAAIC,GAAQF,EAAIG,IAChB,KAAKD,GAASF,EAAII,WAAY,CAE5BJ,EAAII,WAAW,OACfF,GAAQF,EAAIG,MAGhB,MAAOH,GAGT3B,GAAWQ,UAAUD,YAAc,SAAUyB,GAC3C,GAAIL,GAAMzB,KAAKwB,YACf,IAAIC,EAAKA,EAAIG,KAAKvC,KAAKoC,EAAKjC,EAAEuC,UAAUtC,IAG1CK,GAAWQ,UAAUX,iBAAmB,SAAUoB,EAAMK,GACtD,GAAIY,GAAOhC,KAAKE,UAAUa,GAAQf,KAAKE,UAAUa,MACjD,IAAIvB,EAAE6B,KAAKD,GAAKY,EAAKC,KAAKb,GAG5BtB,GAAWQ,UAAUT,oBAAsB,SAAUkB,EAAMK,GACzD,GAAIc,GAAOF,EAAOhC,KAAKE,UAAUa,EACjC,IAAIiB,EAAM,CACR,GAAIxC,EAAE6B,KAAKD,GAAK,CACdY,EAAKG,OAAO,EAAGH,EAAK1C,YACf,CACL4C,EAAQF,EAAKI,QAAQhB,EACrB,IAAIc,GAAS,EAAGF,EAAKG,OAAOD,EAAO,KAKzCpC,GAAWQ,UAAU+B,YAAc,SAAUP,GAC3C,GAAIL,GAAMzB,KAAKwB,YACf,IAAIC,EAAK,CACPK,EAAIQ,OAASC,GACbd,GAAIY,YAAYP,EAAKA,EAAIQ,SAI7BxC,GAAWQ,UAAUkC,UAAY,WAC/BxC,KAAKE,YACLF,MAAKC,YAAc,IACnBD,MAAKuB,uBACLf,UAASI,KAAK6B,YAAYzC,KAAKO,QAGjC,SAASgC,KACP,MAAOG,UAASJ,QACdI,SAASC,SAAW,KAAOD,SAASE,UAAYF,SAASG,KAAO,IAAMH,SAASG,KAAO,OAGvFC,UAAU,EAAEC,WAAW,IAAIC,GAAG,SAAShE,EAAQf,EAAOD,GACzD,GAAIiF,GAAQjE,EAAQ,UACpB,IAAIkE,GAASlE,EAAQ,WAErBf,GAAOD,QAAUmF,CAEjB,SAASA,GAAcC,GACrB,MAAO,IAAIF,GAAOE,GAGpBD,EAAcE,QAAU,QACxBF,GAAcG,OAASH,CACvBA,GAAcI,KAAOL,EAAOK,IAC5BJ,GAAcD,OAASA,CAEvBC,GAAcK,MAAQP,EAAMQ,GAC5BN,GAAcK,MAAQP,EAAMO,KAC5BL,GAAcO,QAAUT,EAAMS,OAC9BP,GAAcQ,KAAOV,EAAMU,IAC3BR,GAAcS,MAAQX,EAAMW,KAC5BT,GAAcU,QAAUV,EAAcW,aAAeb,EAAMY,OAC3DV,GAAcY,SAAWZ,EAAca,cAAgBf,EAAMc,WAE1DE,UAAU,EAAEC,WAAW,IAAIC,GAAG,SAASnF,EAAQf,EAAOD,GACzD,GAAIwB,GAAIR,EAAQ,UAEhBf,GAAOD,QAAUgE,CAEjB,SAASA,GAAKoC,EAAK5F,GACjB,GAAI6F,GAAY7F,EAAO8F,GACvB,IAAIC,IAAY/F,EAChB,IAAI4E,GAAU5E,EAAO4E,OACrB,IAAIZ,GAAYhE,EAAOgE,SAEvB,SAASgC,GAAwBC,GAC/B,GAAIxF,GAAGG,EAAGZ,EAAQkG,CAClB,KAAKzF,EAAI,EAAGG,EAAImF,EAAQjF,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CAC7CT,EAAS+F,EAAQtF,EACjByF,GAAUlG,EAAOkG,SACjB,IAAIA,IAAY,GAAKA,EAAUD,EAAQ,CACrC,GAAIjG,EAAOmG,WAAY,CACrBJ,EAAQpC,OAAOlD,EAAG,EAClBG,IAAK,MACA,CACL,MAAOZ,MAMf,QAASoG,KACP,GAAIpG,GAAS,GAAIwD,GAAKkB,OAAOE,EAC7BmB,GAAQtC,KAAKzD,EACb,OAAOA,GAGT,QAASqG,GAAQrG,EAAQsG,GACvB,GAAIC,EACJ,IAAIvG,IAAW+F,EAAQ,GAAI,CACzBQ,EAAOV,EAAUW,MAAMxG,EAAQsG,OAC1B,CACLC,EAAOvG,EAAO8F,IAAIU,MAAMxG,EAAQsG,GAElC,MAAOC,GAGTvG,EAAO8F,IAAM9F,EAAOyG,KAAO,WACzB,GAAIH,GAAOI,SAEX,SAASC,GAAWC,GAClB,GAAIL,GAAMvG,EAASgG,EAAwBY,EAC3C,IAAI5G,EAAQ,CACVuG,EAAOF,EAAQrG,EAAQsG,OAClB,CACL,GAAIP,EAAQjF,OAAS8E,EAAK,CACxBW,EAAOF,EAAQD,IAAaE,OACvB,CACLC,EAAOI,EAAWC,EAAQ,IAG9B,MAAOL,GAGT,MAAOI,GAAW,GAGpB3G,GAAOgE,UAAYhE,EAAO6G,KAAO,WAC/B7F,EAAE2B,KAAKoD,EAAS,SAAU/F,EAAQS,GAChC,GAAIA,IAAM,EAAGuD,EAAUnD,KAAKb,OACvBA,GAAOgE,aAEd+B,GAAQpC,OAAO,GAGjB3D,GAAO8G,WAAaf,CACpB/F,GAAO+G,OAAS,IAEhB,OAAO/G,MAGNsE,UAAU,IAAI0C,GAAG,SAASxG,EAAQf,EAAOD,GAC5C,GAAIwB,GAAIR,EAAQ,UAGhB,SAASyG,GAAUrB,GACjB,GAAI1F,IAAK0F,CACT,IAAI1F,IAAMA,EAAG,CACTA,EAAI,MACD,IAAIA,IAAM,GAAKA,IAAO,EAAI,GAAMA,MAAQ,EAAI,GAAI,CACnDA,GAAKA,EAAI,IAAM,GAAKgH,KAAKC,MAAMD,KAAKE,IAAIlH,IAE5C,MAAOA,GAGT,IAAKmH,MAAMvF,UAAU8B,QAAS,CAC5ByD,MAAMvF,UAAU8B,QAAU,QAASA,GAAQ0D,GACzC,GAAIvH,GAAOwH,OAAO/F,KAClB,IAAIV,GAASf,EAAKe,SAAW,CAE7B,KAAKA,EAAQ,CAAE,OAAQ,EAEvB,GAAIL,GAAI,CACR,IAAIiG,UAAU5F,OAAS,EAAG,CACxBL,EAAIwG,EAAUP,UAAU,IAI1BjG,EAAIA,GAAK,EAAIA,EAAIyG,KAAKM,IAAI,EAAG1G,EAASL,EACtC,MAAOA,EAAIK,EAAQL,IAAK,CACtB,GAAIA,IAAKV,IAAQA,EAAKU,KAAO6G,EAAQ,CACnC,MAAO7G,IAGX,OAAQ,GAKZ,GAAIgH,KACJ,IAAIhD,GAAQhF,EAAOD,UAEnBiF,GAAMhB,KAAO,SAAUzD,GACrByH,EAAIhE,KAAKzD,GAGXyE,GAAMQ,IAAM,WACV,MAAOwC,GAAIC,QAGbjD,GAAMkD,OAAS,SAAU3H,GACvB,GAAI0D,GAAQ+D,EAAI7D,QAAQ5D,EACxB,IAAI0D,GAAS,EAAG+D,EAAI9D,OAAOD,EAAO,GAGpCe,GAAMW,MAAQ,WACZqC,EAAI9D,OAAO,GAGbc,GAAMO,MAAQ,WACZ,MAAOyC,GAAI3G,OAGb,SAAS8G,GAAYrF,GACnB,GAAIsF,KACJ7G,GAAE2B,KAAK8E,EAAK,SAAUzH,GACpB,GAAIA,EAAOuC,KAASsF,EAAQpE,KAAKzD,IAEnC,OAAO6H,GAGTpD,EAAMS,QAAU,WACd,MAAO0C,GAAY,WAGrBnD,GAAMU,KAAO,WACX,MAAOyC,GAAY,QAGrBnD,GAAMY,QAAU,WACd,GAAIyC,GAAML,EAAIC,OACd1G,GAAE2B,KAAKmF,EAAK,SAAU9H,GACpBA,EAAO6G,SAIXpC,GAAMc,SAAW,WACfvE,EAAE2B,KAAK8B,EAAMU,OAAQ,SAAUnF,GAC7BA,EAAO6G,YAIRvC,UAAU,IAAIyD,GAAG,SAASvH,EAAQf,EAAOD,GAC5C,GAAIwB,GAAIR,EAAQ,UAEhBf,GAAOD,QAAUuF,CAEjB,SAASA,GAAK/E,EAAQgI,GACpBxG,KAAKD,GAAKP,EAAEiH,MACZzG,MAAKxB,OAASA,CACdwB,MAAK0G,OAASlI,EAAOkI,MACrB1G,MAAKwG,IAAMA,KACXxG,MAAK2G,KAAO3G,KAAK4G,SAAW,IAC5B5G,MAAKE,WAAc2G,SAAWC,WAAaC,QAG7CxD,EAAKyD,kBAAoB,GAEzBzD,GAAKjD,UAAU2G,KAAO1D,EAAKjD,UAAU4G,IAAM,SAAUV,GACnDhH,EAAE2H,OAAOnH,KAAKwG,IAAKA,EACnB,OAAOxG,MAGTuD,GAAKjD,UAAUgE,IAAMf,EAAKjD,UAAU2E,KAAO,SAAU7D,EAAIoF,EAAK1B,GAC5D,GAAItG,GAASwB,KAAKxB,MAElB,IAAIA,EAAOyB,YAAa,CACtB,KAAM,IAAIf,OAAM,sDAElB,IAAKM,EAAE6B,KAAKD,GAAK,CACf,KAAM,IAAIgG,WAAU,qCAGtB,GAAI5H,EAAE6H,MAAMnC,UAAU,IAAKJ,EAAOI,UAAU,EAC5C,IAAI1F,EAAE8H,MAAMpC,UAAU,IAAKsB,EAAMtB,UAAU,EAE3CsB,GAAMhH,EAAE+H,aAAa/H,EAAE2H,UAAWnH,KAAKwG,IAAKA,GAC5CxG,MAAK4G,SAAW,IAChB5G,MAAK2G,KAAOnH,EAAEgI,KAEd,IAAIhJ,EAAOiJ,cAAgBlE,EAAKyD,kBAAmB,CACjDU,EAAc1H,KAAMxB,EAAOiJ,cAE7B,GAAIjJ,EAAOmJ,OAAOvF,QAAQpC,SAAW,EAAG,CACtCxB,EAAOmJ,OAAO1F,KAAKjC,MAGrBA,KAAK,WAAW4H,EAAUpJ,EAAQwB,MAElC6H,GAAyB7H,KACzBA,MAAK8H,MAAMtB,EAAKpF,EAAI0D,EAEpB,OAAO9E,MAGTuD,GAAKjD,UAAUyH,KAAOxE,EAAKjD,UAAUwG,QAAU,SAAU1F,EAAI4G,GAC3D,GAAIxI,EAAE6B,KAAKD,GAAK6G,EAAiBjI,KAAM,UAAWoB,EAClD,IAAI5B,EAAE6B,KAAK2G,GAAUhI,KAAK,SAASgI,EACnC,OAAOhI,MAGTuD,GAAKjD,UAAU,SAAWiD,EAAKjD,UAAUuG,MAAQ,SAAUzF,GACzD,GAAI5B,EAAE6B,KAAKD,GAAK6G,EAAiBjI,KAAM,QAASoB,EAChD,OAAOpB,MAGTuD,GAAKjD,UAAU,WAAaiD,EAAKjD,UAAU4H,OAAS,SAAU9G,GAC5D,GAAI5B,EAAE6B,KAAKD,GAAK,CACd,GAAIpB,KAAK4G,SACPxF,EAAG/B,KAAK,KAAM8I,EAASnI,KAAK4G,eAE5B5G,MAAKE,UAAU6G,IAAI9E,KAAKb,GAE5B,MAAOpB,MAGTuD,GAAKjD,UAAUsD,MAAQ,WACrB5D,KAAK4G,SAAW5G,KAAKxB,OAAS,IAC9BwB,MAAK0G,OAAS1G,KAAKwG,IAAMxG,KAAKE,UAAY,KAG5CqD,GAAKjD,UAAU8H,QAAU,WACvB,OAAQpI,KAAKxB,SAAWwB,KAAK0G,OAG/BnD,GAAKjD,UAAUwH,MAAQ,SAAUtB,EAAKpF,EAAI0D,GACxC9E,KAAK0G,OAAOrE,aACVtC,GAAIC,KAAKD,GACTgB,KAAM,MACNyF,IAAKA,EACL6B,IAAKjH,EAAGkH,WACRxD,KAAMA,IAIV,SAAS4C,GAAc3C,EAAMwD,GAC3B,GAAIf,GAAMhI,EAAEgI,KACZzC,GAAKyD,OAASC,YAAY,WACxB,GAAI1D,EAAK6B,SAAU,CACjB8B,EAAWrJ,KAAK0F,OACX,CACL4D,EAAetJ,KAAK0F,EAAMyC,EAAKe,KAEhChF,EAAKyD,mBAGVzD,EAAKD,OAAS,SAAU9E,GACtB,MAAO,IAAI+E,GAAK/E,GAGlB,SAASqJ,GAAyB9C,GAChCA,EAAK2B,OAAO/G,iBAAiB,UAAWiJ,EAAU7D,IAGpD,QAASkD,GAAiBlD,EAAMhE,EAAMK,GACpC,GAAI2D,EAAK6B,SAAU,CACjB,GAAI7B,EAAK6B,SAAS7F,OAAU,OAASA,EACnCK,EAAG/B,KAAK,KAAM8I,EAASpD,EAAK6B,eACzB,CACL7B,EAAK7E,UAAUa,GAAMkB,KAAKb,IAI9B,QAASyH,GAAa9D,EAAM+D,EAAO/H,GACjC,SAAWgE,GAAKyD,SAAW,SAAUE,EAAWrJ,KAAK0F,EACrDgE,GAAWhE,EAAM+D,GAAO/D,EAAK7E,UAAUa,IAGzC,QAASgI,GAAWxK,EAAMuK,GACxB,MAAO,SAASE,GAAMhH,GACpB,GAAIZ,GAAK,IACT,IAAI5B,EAAE6H,MAAMrF,GAAO,CACjBZ,EAAKY,EAAKiH,OACV,IAAI7H,EAAI,CACNA,EAAG/B,KAAK,KAAMyJ,EACd,IAAI9G,EAAK1C,OAAQ0J,EAAMhH,MAM/B,QAASkH,GAAYjI,GACnB,GAAIkI,GAAM,GAAIjK,OAAM+B,EAAK4F,MACzBsC,GAAIC,KAAOnI,EAAKoI,SAChBF,GAAIG,MAAQrI,EAAKsI,UACjB,OAAOJ,GAGT,QAASvB,GAAUpJ,EAAQuG,GACzB,MAAO,YACL,GAAI7C,GAAQ1D,EAAOmJ,OAAOvF,QAAQ2C,EAClCvG,GAAOgL,YAAchK,EAAEgI,KACvB,IAAItF,GAAS,EAAG1D,EAAOmJ,OAAOxF,OAAOD,EAAO,IAIhD,QAASyG,GAAehC,EAAM4B,GAC5B,GAAI1B,GAAQ,IACZ,IAAKrH,EAAEgI,MAAQb,EAAQ4B,EAAU,CAC/B1B,EAAQ,GAAI3H,OAAM,uCAClBc,MAAK4G,UAAa7F,KAAM,YAAa8F,MAAOA,EAC5CgC,GAAa7I,KAAM6G,EAAO,QAC1BgC,GAAa7I,KAAM6G,EAAO,MAC1B6B,GAAWrJ,KAAKW,OAIpB,QAAS0I,KACPe,cAAczJ,KAAKwI,OACnBxI,MAAKwI,OAAS,KAGhB,QAASkB,GAAa3I,GACpB,MAAOA,KAAS,aAAeA,IAAS,cAG1C,QAAS6H,GAAU7D,GACjB,MAAO,SAAS4E,GAAQC,GACtB,GAAI3I,GAAO2I,EAAG3I,IACd,IAAIA,GAAQA,EAAKlB,KAAOgF,EAAKhF,IAAM2J,EAAazI,EAAKF,MAAO,CAC1DgE,EAAK2B,OAAO7G,oBAAoB,UAAW8J,EAC3C5E,GAAK6B,SAAW3F,CAChB4I,GAAe9E,EAAM9D,KAK3B,QAAS4I,GAAe9E,EAAM9D,GAC5B,GAAI6H,GAAQX,EAASlH,EACrB4H,GAAa9D,EAAM+D,EAAO7H,EAAKF,KAAK+I,MAAM,KAAK,GAC/CjB,GAAa9D,EAAM+D,EAAO,OAG5B,QAASX,GAASlH,GAChB,MAAOA,GAAKF,OAAS,YACjBmI,EAAYjI,GACZA,EAAK6H,SAGRhG,UAAU,IAAIiH,GAAG,SAAS/K,EAAQf,EAAOD,GAC5C,GAAIwB,GAAIR,EAAQ,UAChB,IAAIS,GAAYT,EAAQ,WACxB,IAAIuE,GAAOvE,EAAQ,SACnB,IAAIc,GAAad,EAAQ,gBACzB,IAAIgD,GAAOhD,EAAQ,SACnB,IAAIiE,GAAQjE,EAAQ,UAEpB,IAAIgL,GAAS3L,OAAO2L,MACpB,IAAIC,GAAM5L,OAAO4L,KAAO5L,OAAO6L,SAC/B,IAAIC,GAAa3K,EAAE6B,KAAK2I,IAAYA,SAAiBA,KAAW,UAAa,KAC7E,IAAII,GAAc/L,OAAO+L,aAAe/L,OAAOgM,mBAAqBhM,OAAOiM,cAE3ErM,GAAOD,QAAUkF,CAEjB,SAASA,GAAOE,GACdpD,KAAKD,GAAKP,EAAEiH,MACZzG,MAAK2E,WAAa,KAClB3E,MAAKoD,UACLpD,MAAK2H,SACL3H,MAAKwJ,YAAc,CACnBxJ,MAAKuK,YAAYnH,EACjBpD,MAAKG,UAGP+C,EAAO5C,UAAUiF,OAAS,KAC1BrC,GAAO5C,UAAUmH,aAAe,CAChCvE,GAAO5C,UAAUkK,SAAW,GAAK,GAEjCtH,GAAO5C,UAAUiK,YAAc,SAAUnH,GACvCpD,KAAKoD,QAAQqH,UAAY,KACzBzK,MAAKoD,QAAQpE,UACbgB,MAAKoD,QAAQoD,MACbhH,GAAE2H,OAAOnH,KAAKoD,QAASA,EACvB,OAAOpD,MAGTkD,GAAO5C,UAAUH,QAAU,WACzB,GAAIkI,GAAM7I,EAAEuC,UAAUtC,EAEtB,IAAI0K,GAAcF,EAAK,CACrBjK,KAAK0G,OAAS,GAAIsD,GAAOU,EAAWrC,QAC/B,CACLrI,KAAK0G,OAAS,GAAI5G,GAAWE,KAAKD,IAGpCC,KAAK2K,KAAKnL,EAAE2H,QAASpG,KAAM,UACzByF,IAAKhH,EAAE+H,aAAavH,KAAKoD,QAAQoD,KACjCiE,UAAWzK,KAAKoD,QAAQqH,YAE1BzK,MAAK0G,OAAO/G,iBAAiB,QAAS,SAAU5B,GAAK,KAAMA,IAC3DiC,MAAKhB,QAAQgB,KAAKoD,QAAQpE,QAC1BiE,GAAMhB,KAAKjC,KAEX,OAAOA,MAGTkD,GAAO5C,UAAUgE,IAAMpB,EAAO5C,UAAU2E,KAAO,SAAU7D,EAAIoF,EAAK1B,GAChE,GAAIC,EAEJ,IAAIvF,EAAE6H,MAAMb,GAAM,CAChB1B,EAAO0B,CACPA,GAAMtB,UAAU,GAElB,GAAI9D,GAAMA,YAAcmC,GAAM,CAC5BwB,EAAO3D,MACF,CACL,IAAK5B,EAAE6B,KAAKD,GAAK,KAAM,IAAIgG,WAAU,oCACrCrC,GAAO,GAAIxB,GAAKvD,MAGlBA,KAAK2H,OAAO1F,KAAK8C,EACjBvF,GAAEoL,MAAM,WAAc7F,EAAKT,IAAIlD,EAAIoF,EAAK1B,IAExC,OAAOC,GAGT7B,GAAO5C,UAAUtB,QAAUkE,EAAO5C,UAAU,UAAY,SAAU8I,EAAMhI,GACtE,GAAI5B,EAAE6B,KAAK+H,GAAO,CAChBhI,EAAKgI,CACLA,GAAO5J,EAAEqL,OAAOzJ,EAChB,KAAKgI,EAAM,KAAM,IAAIlK,OAAM,yBAC3Bc,MAAK2K,MAAO5J,KAAM,aAAcsH,IAAKjH,EAAGkH,WAAYc,KAAM5J,EAAEqL,OAAOzJ,SAC9D,UAAWgI,KAAS,SAAU,CACnC,GAAI5J,EAAE6B,KAAKD,GAAK,CACdpB,KAAK2K,MAAO5J,KAAM,aAAcsH,IAAKjH,EAAGkH,WAAYc,KAAMA,QACrD,CACL,GAAI5J,EAAE6H,MAAMrH,KAAKoD,QAAQpE,SAAUgB,KAAKoD,QAAQpE,QAAQiD,KAAKmH,EAC7DpJ,MAAK2K,MAAO5J,KAAM,eAAgBsH,IAAKe,SAEpC,IAAI5J,EAAE6H,MAAM+B,GAAO,CACxB,GAAI5J,EAAE6H,MAAMrH,KAAKoD,QAAQpE,SAAUgB,KAAKoD,QAAQpE,QAAUgB,KAAKoD,QAAQpE,QAAQ8L,OAAO1B,EACtFpJ,MAAK2K,MAAO5J,KAAM,eAAgBsH,IAAKe,QAClC,IAAI5J,EAAE8H,MAAM8B,GAAO,CACxBpJ,KAAK2K,MAAO5J,KAAM,cAAesH,IAAK7I,EAAE+H,aAAa6B,KAEvD,MAAOpJ,MAGTkD,GAAO5C,UAAU2G,KAAO/D,EAAO5C,UAAU4G,IAAM,SAAUV,GACvDxG,KAAK2K,MAAO5J,KAAM,MAAOE,KAAMzB,EAAE+H,aAAaf,IAC9C,OAAOxG,MAGTkD,GAAO5C,UAAUsD,MAAQ,WACvB5D,KAAK2K,MAAO5J,KAAM,SAClBf,MAAKoD,QAAQoD,MACb,OAAOxG,MAGTkD,GAAO5C,UAAUyK,WAAa,WAC5BvL,EAAE2B,KAAKnB,KAAKgL,MAAO,SAAUjG,GAC3BA,EAAKnB,SAEP5D,MAAK2H,OAAOxF,OAAO,EACnB,OAAOnC,MAGTkD,GAAO5C,UAAUqK,KAAO,SAAU7I,GAChC,GAAI9B,KAAK0G,OAAQ,CACf1G,KAAK0G,OAAOrE,YAAYP,IAI5BoB,GAAO5C,UAAU0B,KAAO,SAAUoC,GAChC,MAAOpC,GAAKoC,GAAO,EAAGpE,MAGxBkD,GAAO5C,UAAUkC,UAAYU,EAAO5C,UAAU+E,KAAO,WACnD,IAAKrF,KAAK2E,WAAY,CACpB3E,KAAKoD,UACLpD,MAAK+K,aAAanH,OAClB5D,MAAK2E,WAAa,IAClB3E,MAAK0G,OAAOlE,WACZS,GAAMkD,OAAOnG,MAEf,MAAOA,MAGTkD,GAAO5C,UAAU2K,MAAQ/H,EAAO5C,UAAU4K,KAAO,SAAU9H,GACzD,GAAIpD,KAAK2E,WAAY,CACnB3E,KAAKuK,YAAYnH,EACjBpD,MAAKG,SACLH,MAAK2E,WAAa,MAEpB,MAAO3E,MAGTkD,GAAO5C,UAAUoE,QAAU,WACzB,MAAO1E,MAAK2H,OAAOrI,OAGrB4D,GAAO5C,UAAUoD,QAAU,WACzB,MAAO1D,MAAK2H,OAAOrI,OAAS,EAG9B4D,GAAO5C,UAAUqD,KAAOT,EAAO5C,UAAU6K,MAAQ,WAC/C,OAAQnL,KAAK0D,YAAc1D,KAAK2E,aAC1B3E,KAAKwJ,cAAgB,GAAMhK,EAAEgI,MAAQxH,KAAKwJ,YAAexJ,KAAKwK,UAGtEtH,GAAO5C,UAAU8K,GAAKlI,EAAO5C,UAAUX,iBAAmB,SAAUoB,EAAMK,GACxE,GAAIpB,KAAK0G,OAAQ1G,KAAK0G,OAAO/G,iBAAiBoB,EAAMK,EACpD,OAAOpB,MAGTkD,GAAO5C,UAAU+K,IAAMnI,EAAO5C,UAAUT,oBAAsB,SAAUkB,EAAMK,GAC5E,GAAIpB,KAAK0G,QAAUlH,EAAE6B,KAAKD,GAAK,CAC7BpB,KAAK0G,OAAO7G,oBAAoBkB,EAAMK,GAExC,MAAOpB,MAGTkD,GAAO5C,UAAUgI,SAAW,WAC1B,MAAO,kBAGT,SAASoC,GAAWrC,GAClB,GAAIiD,GAAO,IACX,KACEA,EAAO,GAAIC,OAAMlD,IAAQtH,KAAM,oBAC/B,MAAOhD,GACPuN,EAAO,GAAIlB,EACXkB,GAAKE,OAAOnD,EACZiD,GAAOA,EAAKG,UAEd,MAAOxB,GAAIyB,gBAAgBJ,GAG7BtJ,EAAKkB,OAASA,CAEdA,GAAOK,KAAOA,IAEXoI,gBAAgB,EAAEC,SAAS,EAAE3H,UAAU,EAAE4H,SAAS,EAAE/I,UAAU,EAAEC,WAAW,IAAI+I,GAAG,SAAS9M,EAAQf,EAAOD,GAC7G,GAAIwB,GAAIxB,CACR,IAAI+N,GAAQhG,OAAOzF,UAAUgI,QAC7B,IAAIpC,GAAQL,MAAMvF,UAAU4F,KAC5B,IAAI8F,GAASjG,OAAOzF,UAAU2L,cAC9B,IAAIC,GAAgBrG,MAAMsG,OAE1B3M,GAAEgI,IAAM,WACN,OAAO,GAAI4E,OAAOC,UAGpB7M,GAAE6B,KAAO,SAAUiL,GACjB,aAAcA,KAAQ,WAGxB9M,GAAE8H,MAAQ,SAAUzI,GAClB,MAAQA,IAAKkN,EAAM1M,KAAKR,KAAO,mBAAsB,MAGvDW,GAAE6H,MAAQ,SAAUxI,GAClB,MAAOA,KAAMqN,EAAgBA,EAAcrN,GAAKkN,EAAM1M,KAAKR,KAAO,mBAAqB,MAGzFW,GAAE+M,MAAQ,SAAUzH,GAClB,MAAOoB,GAAM7G,KAAKyF,GAGpBtF,GAAEoL,MAAQ,SAAUxJ,GAClBoL,WAAWpL,EAAI,GAGjB5B,GAAE2B,KAAO,SAAUmL,EAAKlL,GACtB,GAAInC,GAAGG,CACP,IAAII,EAAE6H,MAAMiF,GACV,IAAKrN,EAAI,EAAGG,EAAIkN,EAAIhN,OAAQL,EAAIG,EAAGH,GAAK,EAAGmC,EAAGkL,EAAIrN,GAAIA,OACnD,IAAIO,EAAE8H,MAAMgF,GACf,IAAKrN,IAAKqN,GAAK,GAAIN,EAAO3M,KAAKiN,EAAKrN,GAAImC,EAAGkL,EAAIrN,GAAIA,GAGvDO,GAAE2H,OAAS,SAAUsF,GACnB,GAAI3H,GAAOtF,EAAE+M,MAAMrH,WAAWgB,MAAM,EACpC1G,GAAE2B,KAAK2D,EAAM,SAAUwH,GACrB,GAAI9M,EAAE8H,MAAMgF,GAAM,CAChB9M,EAAE2B,KAAKmL,EAAK,SAAUxD,EAAO4D,GAC3BD,EAAOC,GAAO5D,MAIpB,OAAO2D,GAGTjN,GAAEuC,UAAY,SAAUX,GACtB,MAAO,IAAMA,EAAGkH,WAAa,eAG/B9I,GAAEqL,OAAS,SAAUzJ,GACnB,MAAOA,GAAGgI,OAAShI,EAAK,4BAA4B6D,KAAK7D,EAAGkH,YAAclH,EAAG,GAAK,IAGpF5B,GAAE+H,aAAe,SAAU+E,GACzB,GAAI9M,EAAE8H,MAAMgF,GAAM,CAChB9M,EAAE2B,KAAKmL,EAAK,SAAUlL,EAAIsL,GACxB,GAAIlN,EAAE6B,KAAKD,GAAK,CACdkL,EAAI,SAAWI,GAAOtL,EAAGkH,UACzBgE,GAAII,GAAOC,aAIjB,MAAOL,GAGT9M,GAAEiH,KAAO,WACP,GAAIA,GAAO,GAAIxH,EAAG2N,CAClB,KAAK3N,EAAI,EAAGA,EAAI,GAAIA,IAAK,CACvB2N,EAASlH,KAAKkH,SAAW,GAAK,CAC9B,IAAI3N,IAAM,GAAKA,IAAM,IAAMA,IAAM,IAAMA,IAAM,GAAIwH,GAAQ,GACzDA,KAASxH,IAAM,GAAK,EAAKA,IAAM,GAAM2N,EAAS,EAAI,EAAKA,GAAStE,SAAS,IAE3E,MAAO7B,SAGHoG,GAAG,SAAS7N,QAAQf,OAAOD,SACjCC,OAAOD,QAAU0I,MAEjB,SAASA,UACP,GAAInI,MAAOyB,IAEX,SAAS8M,YAAWC,MAClB,GAAI3L,IAAK,IACTQ,MAAK,QAAUmL,KACf,OAAO3L,KAGT,QAAU4L,YACR,YACA,IAAIvC,WAAY,KAChB,IAAIwC,gBAAkBzM,YAAa,WACnC,IAAIuL,OAAQhG,OAAOzF,UAAUgI,QAC7B,IAAIpC,OAAQL,MAAMvF,UAAU4F,KAC5B,IAAIxG,aAAcnB,KAAKoB,iBAAmB,mBAAqB,aAC/D,IAAIC,cAAeF,cAAgB,cAAgB,YAAc,SACjE,IAAIwN,UAAWD,SAAWE,cAAgBC,aAC1C,IAAIC,OAAQ,KACZ,IAAIC,OAAOhL,OAAQiL,YAAaC,WAAa,IAC7C,IAAIC,SAAU,aACd,IAAIC,kBAAmB,WACvB,IAAIxB,eAAgBrG,MAAMsG,OAC1B5N,MAAKoB,iBAAmBpB,KAAKmB,YAE7B,SAAS4H,OAAMzI,GACb,MAAOA,IAAKkN,MAAM1M,KAAKR,KAAO,kBAGhC,QAASwI,OAAMxI,GACb,MAAOA,IAAKqN,cAAgBA,cAAcrN,GAAKkN,MAAM1M,KAAKR,KAAO,iBAGnE,QAAS8O,WAAUrB,GACjB,IAAK,GAAII,KAAOJ,GAAK,GAAIA,EAAIL,eAAeS,GAAM,CAChD,GAAIe,QAAQG,KAAKlB,GAAM,CACrBJ,EAAII,EAAImB,QAAQ,SAAU,KAAOf,WAAWR,EAAII,GAChDJ,GAAII,GAAOC,cACN,CACLL,EAAII,GAAOJ,EAAII,IAGnB,MAAOJ,GAGT,QAASnF,QAAO7E,EAAQmK,GACtB,GAAIxN,GAAGG,EAAGsN,EAAK5H,EAAOoB,MAAM7G,KAAK6F,WAAWgB,MAAM,EAClD,KAAKjH,EAAI,EAAGG,EAAI0F,EAAKxF,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CAC1CwN,EAAS3H,EAAK7F,EACd,IAAIqI,MAAMmF,GAAS,CACjBA,EAASkB,UAAUlB,EACnB,KAAKC,IAAOD,GAAQ,GAAIA,EAAOC,KAASC,UAAW,CACjDrK,EAAOoK,GAAOD,EAAOC,KAI3B,MAAOpK,GAGT,QAASnB,MAAKmL,EAAKlL,GACjB,GAAInC,GAAGG,CACP,IAAIiI,MAAMiF,GAAM,CACd,GAAIA,EAAIwB,QAAS,CACfxB,EAAIwB,QAAQ1M,OACP,CACL,IAAKnC,EAAI,EAAGG,EAAIkN,EAAIhN,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CACzCmC,EAAGkL,EAAIrN,GAAIA,SAGV,IAAIqI,MAAMgF,GAAM,CACrB,IAAKrN,IAAKqN,GAAK,GAAIA,EAAIL,eAAehN,GAAI,CACxCmC,EAAGkL,EAAIrN,GAAIA,KAKjB,QAAS8O,uBACP,GAAIvN,SAASwN,aAAe,WAAY,CACtCX,MAAQ,SACH,CACL7M,SAASyN,mBAAqB,WAC5B,GAAIzN,SAASwN,aAAe,WAAY,CACtCX,MAAQ,QAMhB,QAASa,cAAa7F,GACpB,GAAI8F,GAAO3N,SAAS4N,qBAAqB,QAAQ,EACjD,IAAIC,GAAS7N,SAASC,cAAc,SACpC4N,GAAOtN,KAAO,iBACdsN,GAAOhG,IAAMA,CACbkF,aAAYtL,KAAKoM,EAEjBA,GAAOC,OAASD,EAAOJ,mBAAqB,WAC1C,IAAKjO,KAAKgO,YAAchO,KAAKgO,aAAe,UAAYhO,KAAKgO,aAAe,WAAY,CACtFT,YAAYpL,OAAOoL,YAAYnL,QAAQiM,GAAS,GAElDA,EAAOC,OAASD,EAAOJ,mBAAqB,KAG9CE,GAAKtN,YAAYwN,GAGnB,QAASjB,iBACP,GAAInO,GAAGG,EAAG0F,EAAOoB,MAAM7G,KAAK6F,UAC5B,KAAKjG,EAAI,EAAGG,EAAI0F,EAAKxF,OAAQL,EAAIG,EAAGH,GAAK,EAAG,CAC1C,GAAI6F,EAAK7F,GAAIiP,aAAapJ,EAAK7F,KAInC,QAASsP,oBACPf,WAAa/E,YAAY,WACvB,GAAI4E,QAAUE,YAAYjO,OAAQ,CAChCmK,cAAc+D,WACdrM,MAAKmM,MAAO,SAAUlM,GAAMA,KAC5BkM,SACAE,YAAa,OAEd,IAGL,QAASgB,aAAYnG,GACnB,GAAIhB,MAAMgB,GAAM,CACd6E,SAASlI,MAAMzG,KAAM8J,EAAIoG,IAAIC,sBACxB,CACLxB,SAASwB,gBAAgBrG,IAE3B,IAAK4E,WAAaO,WAAY,CAC5Be,oBAIJ,QAASG,iBAAgBC,GACvB,GAAIjB,iBAAiBE,KAAKe,KAAU,MAAO,CACzCA,EAAOjM,SAASJ,OAASqM,EAE3B,MAAOA,GAGT,QAAS3P,SAAQqJ,GACf,GAAIhB,MAAMgB,UAAeA,KAAQ,SAAU,CACzCmG,YAAYnG,OACP,IAAIf,MAAMe,GAAM,CACrBlH,KAAKkH,EAAK,SAAUS,EAAOM,GACzBwF,UAAUxF,EAAMN,MAKtB,QAAS8F,WAAUxF,KAAMhI,IACvB,GAAIqM,QAAQG,KAAKxE,MAAO,CACtBA,KAAOA,KAAKyE,QAAQ,SAAU,GAC9BzM,IAAK0L,WAAW1L,IAElBQ,KAAK,2BAA6BR,IAGpC,QAASiB,aAAYP,GACnB,GAAImL,SAAU,CACZ1O,KAAK8D,YAAYP,OACZ,CACLA,EAAIZ,MAAQ,WACZ3C,MAAKsQ,OAAOxM,YAAYP,EAAKQ,SAIjC,QAASwM,WAAUhN,EAAKqH,GACtB9G,aACEtB,KAAM,YACNhB,GAAI+B,EAAI/B,GACR8G,MAAOsC,EAAI4F,SAAW5F,EACtBE,UAAWF,EAAIC,MAAQ,KACvBG,WAAYJ,EAAIG,OAAS,OAI7B,QAAS0F,aAAYlN,EAAKmN,GACxB5M,aACEtB,KAAM,cACNhB,GAAI+B,EAAI/B,GACR+I,MAAOmG,IAIX,QAASC,MAAKpN,GACZ,MAAO,UAASqH,EAAKL,GACnB,GAAIK,EAAK,CACP2F,UAAUhN,EAAKqH,OACV,CACL6F,YAAYlN,EAAKgH,KAKvB,QAASqG,SAAQrN,GACf,GAAIsN,GAAS,IACb,IAAItK,GAAOhD,EAAIgD,QACf,IAAI1D,GAAK0L,WAAWhL,EAAIuG,IACxB,IAAIgH,GAAM/H,MAAMxF,EAAI0E,KAAOmH,UAAU7L,EAAI0E,KAAOjI,KAAKkM,UAErD,IAAIrJ,EAAG9B,SAAYwF,EAAKxF,OAAS,EAAI,CACnCwF,EAAK7C,KAAKiN,KAAKpN,GACfV,GAAG4D,MAAMqK,EAAKvK,OACT,CACLsK,EAAShO,EAAG4D,MAAMqK,EAAKvK,EACvB,IAAIsK,YAAkBlQ,OAAO,CAC3B4P,UAAUhN,EAAKsN,OACV,CACLJ,YAAYlN,EAAKsN,KAKvB,QAAS9K,KAAIxC,GACX,QAASwN,KACP,IACEH,QAAQrN,GACR,MAAO/D,GACP+Q,UAAUhN,EAAK/D,IAInB,IAAKkP,YAAcI,OAASE,YAAYjO,QAAS,CAC/CgO,MAAMrL,KAAKqN,OACN,CACLA,KAIJ,QAASrE,OAAMlN,GACb,GAAIA,EAAEiB,QAAS,CAAEA,QAAQjB,EAAEiB,SAC3B,GAAIjB,EAAEuE,OAAQ,CAAEA,OAASvE,EAAEuE,OAC3BmI,UAAY1M,EAAE0M,WAAaA,SAC3BlM,MAAKkM,WAAakD,UAAU5P,EAAEyI,SAGhC,QAAS5C,SACPrF,KAAKkM,cAGP,QAAS8E,WAAUtO,GACjBkG,OAAO5I,KAAKkM,WAAaA,WAAYxJ,EAAKuF,KAG5C,QAASoC,WAAUgB,GACjB,GAAI3I,GAAO2I,EAAG3I,IACd,IAAIA,EAAKqB,OAAQ,CACfA,OAASrB,EAAKqB,OAGhB,OAAQrB,EAAKF,MACX,IAAK,QAASkK,MAAMhK,EAAO,MAC3B,KAAK,MAAOqD,IAAIrD,EAAO,MACvB,KAAK,MAAOsO,UAAUtO,EAAO,MAC7B,KAAK,aAAc2N,UAAU3N,EAAKmI,KAAMnI,EAAKoH,IAAM,MACnD,KAAK,eACL,IAAK,cAAerJ,QAAQiC,EAAKoH,IAAM,MACvC,KAAK,QAASzE,OAAS,QAI3B,IAAKqJ,SAAU,CACbM,cACAD,SACAS,uBAGFxP,KAAKoB,iBAAiBC,aAAcgJ,UACpCrK,MAAKoB,iBAAiB,QAAS,SAAUwJ,GAAO,KAAMA,oBAI/C,IAAI"}
{"version":3,"sources":["thread.js"],"names":["e","exports","module","define","amd","f","window","global","self","thread","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_","workerSrc","eventMethod","addEventListener","messageEvent","removeEventListener","FakeWorker","id","this","_terminated","listeners","_create","_setupListeners","_initialize","prototype","iframe","document","createElement","style","display","body","appendChild","_subscribeListeners","type","eventHandler","data","owner","each","fn","isFn","_eventHandler","_unsubscribeListeners","_getWindow","win","contentWindow","wEval","eval","execScript","msg","getSource","pool","push","index","splice","indexOf","postMessage","origin","getLocation","terminate","removeChild","./utils","./worker",2,"store","Thread","ThreadFactory","options","VERSION","create","Task","total","all","running","idle","flush","killAll","terminateAll","killIdle","terminateIdle","./store","./thread",3,"num","threadRun","run","threads","findBestAvailableThread","offset","pending","terminated","newThread","runTask","args","task","apply","exec","arguments","nextThread","count","kill","threadPool","isPool",4,"buf","slice","remove","getByStatus","typeBuf","arr",5,"env","uuid","worker","time","memoized","error","success","end","intervalCheckTime","bind","set","extend","TypeError","isArr","isObj","serializeMap","now","maxTaskDelay","checkInterval","_tasks","cleanTask","addWorkerMessageListener","sendMessage","then","errorFn","pushStateHandler","finish","getValue","flushed","src","toString","maxDelay","_timer","setInterval","clearTimer","checkTaskDelay","onMessage","dispathEvent","value","dispatcher","recur","shift","createError","err","name","errorName","stack","errorStack","_latestTask","clearInterval","isValidEvent","handler","ev","triggerMessage","split",6,"Worker","URL","webkitURL","hasWorkers","isIE","test","navigator","userAgent","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","setOptions","createThread","idleTime","defaults","evalPath","silent","defer","fnName","send","concat","flushTasks","tasks","start","init","_setOptions","sleep","on","off","namespace","createBlob","blob","Blob","append","getBlob","createObjectURL","./fake-worker","./pool","./task",7,"toStr","Object","Array","hasOwn","hasOwnProperty","isArrayNative","isArray","Date","getTime","obj","toArr","setTimeout","target","key","undefined","random","Math","location","protocol","hostname","port",8,"$$evalExpr","expr","isolated","isWorker","importFn","importScripts","appendScripts","ready","fnRegex","urlProtocolRegex","queue","scriptsLoad","intervalId","mapFields","replace","forEach","waitToDocumentReady","readyState","onreadystatechange","appendScript","head","getElementsByTagName","script","onload","scriptsLoadTimer","loadScripts","map","makePathFullUrl","path","requireFn","parent","sendError","message","sendSuccess","val","done","process","result","ctx","doJob","extendEnv"],"mappings":"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"}
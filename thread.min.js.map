{"version":3,"sources":["thread.js"],"names":["e","exports","module","define","amd","f","window","global","self","thread","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_","workerSrc","eventMethod","addEventListener","messageEvent","removeEventListener","FakeWorker","id","this","listeners","_create","_setupListeners","_initialize","prototype","iframe","document","createElement","style","display","body","appendChild","_subscribeListeners","type","eventHandler","data","owner","each","fn","isFn","_eventHandler","_unsubscribeListeners","_getWindow","win","contentWindow","wEval","eval","wExecScript","execScript","msg","getSource","pool","push","index","splice","indexOf","postMessage","origin","getLocation","terminate","removeChild","location","protocol","hostname","port","./utils","./worker",2,"store","Thread","ThreadFactory","options","VERSION","create","Task","total","running","idle","flush","killAll","terminateAll","killIdle","terminateIdle","./store","./thread",3,"num","threadRun","run","threads","findBestAvailableThread","offset","pending","terminated","newThread","runTask","args","task","apply","exec","arguments","nextThread","count","kill","threadPool","isPool",4,"buf","all","slice","remove","getByStatus","typeBuf","arr",5,"env","generateUUID","worker","time","memoized","error","success","end","_subscribe","intervalCheckTime","_getValue","createError","value","_trigger","_timer","clearTimer","dispatcher","onMessage","bind","set","extend","_terminated","TypeError","isArr","serializeMap","now","maxTaskDelay","_checkInterval","_tasks","cleanTask","_send","_addHandler","then","errorFn","flushed","src","toString","maxDelay","setInterval","checkTaskDelay","recur","shift","err","name","errorName","stack","errorStack","_latestTask","clearInterval","isValidEvent","handler","ev","split",6,"URL","webkitURL","hasWorkers","Worker","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","_setOptions","idleTime","namespace","blob","Blob","append","getBlob","createObjectURL","send","fnName","concat","isObj","tasks","defer","flushTasks","start","init","sleep","on","off","./fake-worker","./pool","./task",7,"toStr","Object","Array","Date","getTime","obj","toArr","setTimeout","ctx","hasOwnProperty","target","key","undefined","d","uuid","replace","c","Math","random","floor",8,"$$evalExpr","expr","isolated","isWorker","importFn","importScripts","appendScripts","ready","queue","scriptsLoad","intervalId","fnRegex","isArray","mapFields","test","forEach","waitReady","dom","readyState","onreadystatechange","appendScript","head","getElementsByTagName","script","onload","scriptsLoadTimer","loadScripts","requireFn","parent","sendError","message","sendSuccess","val","done","process","doJob","extendEnv"],"mappings":"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"}
{"version":3,"sources":["thread.js"],"names":["e","exports","module","define","amd","f","window","global","self","thread","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_","workerSrc","eventMethod","addEventListener","messageEvent","removeEventListener","FakeWorker","id","this","_terminated","listeners","_create","_setupListeners","_initialize","prototype","iframe","document","createElement","style","display","body","appendChild","_subscribeListeners","type","eventHandler","data","owner","each","fn","isFn","_eventHandler","_unsubscribeListeners","_getWindow","win","contentWindow","wEval","eval","execScript","msg","getSource","pool","push","index","splice","indexOf","postMessage","origin","getLocation","terminate","removeChild","location","protocol","hostname","port","./utils","./worker",2,"store","Thread","ThreadFactory","options","VERSION","create","Task","total","all","running","idle","flush","killAll","terminateAll","killIdle","terminateIdle","./store","./thread",3,"num","threadRun","run","threads","findBestAvailableThread","offset","pending","terminated","newThread","runTask","args","task","apply","exec","arguments","nextThread","count","kill","threadPool","isPool",4,"toInteger","Math","floor","abs","Array","sought","Object","max","buf","slice","remove","getByStatus","typeBuf","arr",5,"env","uuid","worker","time","memoized","error","success","end","intervalCheckTime","bind","set","extend","TypeError","isArr","isObj","serializeMap","now","maxTaskDelay","checkInterval","_tasks","cleanTask","addWorkerMessageListener","sendMessage","then","errorFn","pushStateHandler","finish","getValue","flushed","src","toString","maxDelay","_timer","setInterval","clearTimer","checkTaskDelay","onMessage","dispathEvent","value","dispatcher","recur","shift","createError","err","name","errorName","stack","errorStack","_latestTask","clearInterval","isValidEvent","handler","ev","triggerMessage","split",6,"Worker","URL","webkitURL","hasWorkers","isIE","test","navigator","userAgent","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","setOptions","createThread","idleTime","defaults","evalPath","defer","fnName","send","concat","flushTasks","tasks","start","init","_setOptions","sleep","on","off","namespace","createBlob","blob","Blob","append","getBlob","createObjectURL","./fake-worker","./pool","./task",7,"toStr","hasOwn","hasOwnProperty","isArrayNative","isArray","Date","getTime","obj","toArr","setTimeout","target","key","undefined","random",8,"$$evalExpr","expr","isolated","isWorker","importFn","importScripts","appendScripts","ready","queue","scriptsLoad","intervalId","fnRegex","urlProtocolRegex","mapFields","replace","forEach","waitToDocumentReady","readyState","onreadystatechange","appendScript","head","getElementsByTagName","script","onload","scriptsLoadTimer","loadScripts","map","makePathFullUrl","path","requireFn","parent","sendError","message","sendSuccess","val","done","process","result","ctx","doJob","extendEnv"],"mappings":"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"}